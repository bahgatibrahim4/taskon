# ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช - ุฏููู ุงูุงุณุชุฎุฏุงู

## ูุธุฑุฉ ุนุงูุฉ
ูุธุงู ุฅุดุนุงุฑุงุช ูุชูุงูู ูุชูุญ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูููุณุชุฎุฏููู ุนูุฏ ุชูููุฐ ุนูููุงุช ูุฎุชููุฉ (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู) ูู ุงูุตูุญุงุช ุงููุฎุชููุฉ.

---

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Collection:** `notifications` - ุชุฎุฒูู ุงูุฅุดุนุงุฑุงุช
- **Collection:** `notification_settings` - ุชุฎุฒูู ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช

### 2. APIs ุงูุฑุฆูุณูุฉ

#### ุฅุฏุงุฑุฉ ุงูุฅุดุนุงุฑุงุช
```javascript
POST   /notifications                      // ุฅูุดุงุก ุฅุดุนุงุฑ
GET    /notifications/:userId              // ุฌูุจ ุฅุดุนุงุฑุงุช ูุณุชุฎุฏู
GET    /notifications/:userId/unread-count // ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
PUT    /notifications/:id/read             // ุชุนููู ุฅุดุนุงุฑ ูููุฑูุก
PUT    /notifications/:userId/read-all     // ุชุนููู ุงููู ูููุฑูุก
DELETE /notifications/:id                  // ุญุฐู ุฅุดุนุงุฑ
DELETE /notifications/:userId/clear-read   // ูุณุญ ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุกุฉ
```

#### ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช
```javascript
POST   /notification-settings              // ุญูุธ ุงูุฅุนุฏุงุฏุงุช
GET    /notification-settings               // ุฌูุจ ุงูุฅุนุฏุงุฏุงุช
```

### 3. ุงููุงุฌูุงุช

#### ูุฑูุฒ ุงูุชุญูู ูู ุงูุฅุดุนุงุฑุงุช
**ุงูููู:** `notifications-center.html`

**ุงููููุฒุงุช:**
- โ ุชูุนูู/ุชุนุทูู ูู ููุน ุฅุดุนุงุฑ
- ๐ฅ ุงุฎุชูุงุฑ ุงููุณุชุฎุฏููู ุงููุญุฏุฏูู ููู ุฅุดุนุงุฑ
- ๐ ููุชุฑุฉ ุงููุณุชุฎุฏููู ุญุณุจ ุงูุตูุงุญูุงุช ุชููุงุฆูุงู
- ๐ ุฅุญุตุงุฆูุงุช (ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุงูููุนููุฉ)
- ๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุนูู ุงูุณูุฑูุฑ

#### ุฃููููุฉ ุงูุฅุดุนุงุฑุงุช ูู ุงูุดุฑูุท ุงูุนููู
**ุงูููู:** `components/main-navbar.html`

**ุงููููุฒุงุช:**
- ๐ ุฃููููุฉ ุฌุฑุณ ุงูุฅุดุนุงุฑุงุช
- ๐ด Badge ูุธูุฑ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
- ๐ ูุงุฆูุฉ ููุณุฏูุฉ ูุนุฑุถ ุขุฎุฑ 20 ุฅุดุนุงุฑ
- โ ุชุนููู ุงููู ูููุฑูุก
- ๐๏ธ ูุณุญ ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุกุฉ
- ๐ ุชุญุฏูุซ ุชููุงุฆู ูู 30 ุซุงููุฉ

---

## ุฃููุงุน ุงูุฅุดุนุงุฑุงุช ุงููุชุงุญุฉ

### ุงููุณุชุฎูุตุงุช
- `extract-add` - ุฅุถุงูุฉ ูุณุชุฎูุต (ุงูุตูุงุญูุฉ: extracts-view)
- `extract-edit` - ุชุนุฏูู ูุณุชุฎูุต (ุงูุตูุงุญูุฉ: extracts-edit)
- `extract-delete` - ุญุฐู ูุณุชุฎูุต (ุงูุตูุงุญูุฉ: extracts-delete)

### ุงูููุงูููู
- `contractor-add` - ุฅุถุงูุฉ ููุงูู (ุงูุตูุงุญูุฉ: contractors-view)
- `contractor-edit` - ุชุนุฏูู ููุงูู (ุงูุตูุงุญูุฉ: contractors-edit)
- `contractor-delete` - ุญุฐู ููุงูู (ุงูุตูุงุญูุฉ: contractors-delete)

### ุงููุจุถ ุงูุดูุฑู
- `pay-add` - ุฅุถุงูุฉ ูุจุถ (ุงูุตูุงุญูุฉ: workers-monthly-pay-view)
- `pay-save` - ุญูุธ ุงูุดูุฑ (ุงูุตูุงุญูุฉ: workers-monthly-pay-edit)
- `pay-delete` - ุญุฐู ูุจุถ (ุงูุตูุงุญูุฉ: workers-monthly-pay-delete)

### ุงูุนูุงู
- `worker-add` - ุฅุถุงูุฉ ุนุงูู (ุงูุตูุงุญูุฉ: workers-add)
- `worker-edit` - ุชุนุฏูู ุนุงูู (ุงูุตูุงุญูุฉ: workers-edit)
- `worker-delete` - ุญุฐู ุนุงูู (ุงูุตูุงุญูุฉ: workers-delete)

### ุงููุดุชุฑูุงุช ูุงูููุฑุฏูู
- `purchase-add` - ุฅุถุงูุฉ ูุดุชุฑูุงุช (ุงูุตูุงุญูุฉ: purchases-view)
- `supplier-add` - ุฅุถุงูุฉ ููุฑุฏ (ุงูุตูุงุญูุฉ: suppliers-view)

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฅุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช (ูุณุคูู ุงููุธุงู)

1. ุงูุชุญ `notifications-center.html`
2. ููู ููุน ุฅุดุนุงุฑ:
   - ูุนูู/ุนุทูู ุงูุฅุดุนุงุฑ ุจุงุณุชุฎุฏุงู ุงูููุชุงุญ
   - ุงุฎุชุฑ ุงููุณุชุฎุฏููู ุงูุฐูู ุณูุณุชูููู ุงูุฅุดุนุงุฑ
   - (ุณูุธูุฑ ููุท ุงููุณุชุฎุฏููู ุงูุฐูู ูุฏููู ุงูุตูุงุญูุฉ ุงููุทููุจุฉ)
3. ุงุถุบุท **ุญูุธ ุงูุฅุนุฏุงุฏุงุช**

### 2. ุฅุถุงูุฉ ุฅุดุนุงุฑ ูู ุตูุญุฉ ุฌุฏูุฏุฉ

#### ูุซุงู: ุฅุถุงูุฉ ุฅุดุนุงุฑ ุนูุฏ ุญูุธ ูุณุชุฎูุต

```javascript
// ูู ููุงูุฉ ุฏุงูุฉ ุญูุธ ุงููุณุชุฎูุต
if (res.ok) {
  const result = await res.json();
  
  // ุฅุฑุณุงู ุฅุดุนุงุฑ
  if (window.sendNotification) {
    await window.sendNotification(
      'extract-add',                          // ููุน ุงูุฅุดุนุงุฑ
      `ุชู ุฅุถุงูุฉ ูุณุชุฎูุต ุฑูู ${extractNumber}`, // ูุต ุงูุฑุณุงูุฉ
      'extracts',                             // ุงูุตูุญุฉ ุงููุตุฏุฑ
      result._id                              // ูุนุฑู ุงูุนูุตุฑ
    );
  }
  
  alert('ุชู ุงูุญูุธ ุจูุฌุงุญ');
}
```

#### ูุซุงู: ุฅุถุงูุฉ ุฅุดุนุงุฑ ุนูุฏ ุชุนุฏูู ููุงูู

```javascript
// ูู ููุงูุฉ ุฏุงูุฉ ุชุญุฏูุซ ุงูููุงูู
if (finalRes.ok) {
  // ุฅุฑุณุงู ุฅุดุนุงุฑ
  if (window.sendNotification) {
    await window.sendNotification(
      'contractor-edit',
      `ุชู ุชุนุฏูู ุจูุงูุงุช ุงูููุงูู: ${contractorName}`,
      'contractors',
      contractorId
    );
  }
  
  alert('ุชู ุงูุชุนุฏูู ุจูุฌุงุญ');
}
```

#### ูุซุงู: ุฅุถุงูุฉ ุฅุดุนุงุฑ ุนูุฏ ุญุฐู ุนุงูู

```javascript
// ุนูุฏ ุญุฐู ุนุงูู
async function deleteWorker(workerId, workerName) {
  const res = await fetch(`/workers/${workerId}`, {
    method: 'DELETE'
  });
  
  if (res.ok) {
    // ุฅุฑุณุงู ุฅุดุนุงุฑ
    if (window.sendNotification) {
      await window.sendNotification(
        'worker-delete',
        `ุชู ุญุฐู ุงูุนุงูู: ${workerName}`,
        'workers',
        workerId
      );
    }
    
    alert('ุชู ุงูุญุฐู ุจูุฌุงุญ');
  }
}
```

---

## ุขููุฉ ุนูู ุงููุธุงู

### 1. ุฅุฑุณุงู ุงูุฅุดุนุงุฑ
```
ุงูุตูุญุฉ โ window.sendNotification()
         โ
    ุฌูุจ ุงูุฅุนุฏุงุฏุงุช ูู ุงูุณูุฑูุฑ
         โ
    ูุญุต: ูู ุงูุฅุดุนุงุฑ ููุนููุ
         โ
    ุฌูุจ ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุงููุญุฏุฏูู
         โ
    ุฅุฑุณุงู ุฅุดุนุงุฑ ููู ูุณุชุฎุฏู
         โ
    ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

### 2. ุงุณุชูุจุงู ุงูุฅุดุนุงุฑ
```
ุงููุณุชุฎุฏู ููุชุญ ุฃู ุตูุญุฉ
         โ
    ุงูุชุญูู ูู ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
         โ
    ุนุฑุถ ุงูุนุฏุฏ ูู badge ุงูุฌุฑุณ
         โ
    ุงููุณุชุฎุฏู ูุถุบุท ุนูู ุงูุฌุฑุณ
         โ
    ุนุฑุถ ูุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช
         โ
    ุงูููุฑ ุนูู ุฅุดุนุงุฑ โ ุชุนูููู ูููุฑูุก
```

### 3. ุงูููุชุฑุฉ ุญุณุจ ุงูุตูุงุญูุงุช
```
ููุน ุงูุฅุดุนุงุฑ โ ุงูุตูุงุญูุฉ ุงููุทููุจุฉ
         โ
    ุฌูุจ ุฌููุน ุงููุณุชุฎุฏููู
         โ
    ููุชุฑุฉ ุงููุณุชุฎุฏููู ุญุณุจ ุงูุตูุงุญูุฉ
         โ
    ุนุฑุถ ููุท ุงููุณุชุฎุฏููู ุงููุคูููู
         โ
    ุงุฎุชูุงุฑ ุงููุณุชุฎุฏููู ุงููุญุฏุฏูู
```

---

## ุงูุชุฎุตูุต ูุงูุฅุถุงูุงุช

### ุฅุถุงูุฉ ููุน ุฅุดุนุงุฑ ุฌุฏูุฏ

#### 1. ูู `notifications-center.html`
ุฃุถู ูู ูุงุฆูุฉ `notificationPermissions`:
```javascript
const notificationPermissions = {
  // ... ุงูุฅุดุนุงุฑุงุช ุงูููุฌูุฏุฉ
  'new-type': 'required-permission', // ููุน ุฌุฏูุฏ
};
```

#### 2. ูู HTML (notifications-center.html)
ุฃุถู card ุฌุฏูุฏ:
```html
<div class="notification-card" data-type="new-type">
  <div class="card-header">
    <div class="card-title">
      <span>๐</span>
      <span>ุนููุงู ุงูุฅุดุนุงุฑ</span>
    </div>
    <div class="toggle-switch"></div>
  </div>
  <div class="card-description">
    ูุตู ุงูุฅุดุนุงุฑ
  </div>
  <!-- ุณูุชู ุฅุถุงูุฉ users-selector ุชููุงุฆูุงู -->
</div>
```

#### 3. ูู ุงูุตูุญุฉ ุงููุทููุจุฉ
ุงุณุชุฎุฏู `window.sendNotification()`:
```javascript
await window.sendNotification(
  'new-type',
  'ุฑุณุงูุฉ ุงูุฅุดุนุงุฑ',
  'source-page',
  'item-id'
);
```

#### 4. ูู `main-navbar.html`
ุฃุถู ุฃููููุฉ ููููุน ุงูุฌุฏูุฏ ูู ุฏุงูุฉ `getNotificationIcon()`:
```javascript
function getNotificationIcon(type) {
  const icons = {
    // ... ุงูุฃููููุงุช ุงูููุฌูุฏุฉ
    'new-type': '๐'
  };
  return icons[type] || '๐ข';
}
```

---

## ุงููููุงุช ุงููุนุฏููุฉ

### ูููุงุช ุงูุณูุฑูุฑ
- โ `server.js` - ุฅุถุงูุฉ APIs ุงูุฅุดุนุงุฑุงุช ูุงูุฅุนุฏุงุฏุงุช

### ูููุงุช ุงููุงุฌูุฉ
- โ `notifications-center.html` - ูุฑูุฒ ุงูุชุญูู
- โ `components/main-navbar.html` - ุฃููููุฉ ููุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช
- โ `add-extract.html` - ูุซุงู: ุฅุดุนุงุฑ ุฅุถุงูุฉ ูุณุชุฎูุต
- โ `extract.html` - ูุซุงู: ุฅุดุนุงุฑ ุชุนุฏูู ูุณุชุฎูุต

---

## ุงูุตูุงูุฉ ูุงูุชุทููุฑ ุงููุณุชูุจูู

### ุชุญุณููุงุช ููุชุฑุญุฉ
- [ ] Real-time notifications ุจุงุณุชุฎุฏุงู WebSocket
- [ ] ุฅุดุนุงุฑุงุช ุณุทุญ ุงูููุชุจ (Desktop Notifications)
- [ ] ููุชุฑุฉ ุงูุฅุดุนุงุฑุงุช ุญุณุจ ุงูููุน/ุงูุชุงุฑูุฎ
- [ ] ุตูุญุฉ ุณุฌู ุงูุฅุดุนุงุฑุงุช ุงููุงูู
- [ ] ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ ุนู ุงูุฅุดุนุงุฑุงุช

### ุฃูุถู ุงูููุงุฑุณุงุช
1. โ ุฏุงุฆูุงู ุชุญูู ูู ูุฌูุฏ `window.sendNotification` ูุจู ุงูุงุณุชุฎุฏุงู
2. โ ุฃุฑุณู ุฑุณุงุฆู ูุงุถุญุฉ ููููุฏุฉ
3. โ ุญุฏุฏ ุงูุตูุญุฉ ุงููุตุฏุฑ ู ID ุงูุนูุตุฑ ููุฑุจุท
4. โ ูุง ุชุฑุณู ุฅุดุนุงุฑุงุช ููุนูููุงุช ุงูุจุณูุทุฉ ุฌุฏุงู
5. โ ุงุฎุชุจุฑ ุงูุฅุดุนุงุฑุงุช ุจุนุฏ ูู ุฅุถุงูุฉ

---

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุชุญูู ูู console ุงููุชุตูุญ ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุชุดุบูู ุงูุณูุฑูุฑ ุจุดูู ุตุญูุญ
3. ุชุญูู ูู ุงูุตูุงุญูุงุช ูู `users.html`
4. ุฑุงุฌุน ุงูุฅุนุฏุงุฏุงุช ูู `notifications-center.html`

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** GitHub Copilot ๐ค
**ุงูุชุงุฑูุฎ:** ุฃูุชูุจุฑ 2025
